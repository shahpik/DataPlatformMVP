trigger:
  branches:
    include:
      - master
  paths:
    exclude:
      - README.md



stages:

  - stage: Build
    displayName: Build Artefacts
    jobs:
      - job: Build
        displayName: Build
        pool:
          vmImage: ubuntu-latest
        steps:
          - task: PublishPipelineArtifact@1
            inputs:
              targetPath: deploy
              artifact: deploy

  - stage: DeployToTest
    displayName: Deploy Test Environment
    dependsOn: Build
    condition: succeeded('Build')
    variables:
    - template: vars.tst.yml
    jobs:
    - template: jobs.yml